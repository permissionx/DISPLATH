# DISPLATH Web GUI

## 功能介绍

DISPLATH Web GUI 提供了两种模式来运行DISPLATH模拟：

### 1. 参数输入模式（推荐）
通过界面输入参数，自动生成main.jl脚本：

- **晶体结构**：自定义输入原胞矢量、基向量、基原子位置等
- **晶体元素**：动态添加任意元素类型，设置Ed和位移阈值能量
- **离子配置**：选择任意离子类型和入射参数
- **模拟参数**：设置能量范围、重复次数、线程数等
- **脚本预览**：实时查看生成的Julia脚本

### 2. 脚本编辑模式
直接编辑或加载现有的Julia脚本运行

## 安装和运行

```bash
cd src/gui
pip install -r requirements.txt
python main.py
```

然后在浏览器中访问：http://localhost:5000

## 使用说明

### 参数输入模式使用步骤：

1. **定义晶体结构**
   - 输入晶格常数（可选，如 a = 1.42）
   - 输入原胞矢量（如 3.0*a 0.0 0.0; 0.0 3.0^0.5*a 0.0; 0.0 0.0 b）
   - 输入基原子位置（如 0.0 0.0 0.0; 1.0/3.0 0.0 0.0）
   - 输入基原子类型（如 1, 1, 1, 1）
   - 输入网格矢量用于插值

2. **添加晶体元素**
   - 点击"Add Element"添加元素
   - 可选择预设元素或手动输入任意元素符号
   - 设置Ed和位移阈值能量
   - 可添加多种不同元素

3. **配置离子**
   - 选择或输入离子类型（支持任意元素）
   - 设置离子的Ed和位移阈值能量
   - 设置初始位置和入射方向
   - 设置离子区域大小（随机入射范围）

4. **设置模拟参数**
   - 能量范围：起始、结束和步长（eV）
   - 重复次数：每个能量点的模拟次数
   - 线程数：并行计算线程数
   - 其他高级参数（pMax、空位恢复距离等）

5. **预览和运行**
   - 点击"Preview Script"查看生成的脚本
   - 点击"Run Simulation"开始模拟
   - 实时查看输出结果

### 高级选项

- **动态加载模式**：勾选后可设置温度和德拜温度
- **pMax**：截断参数
- **空位恢复距离**：判定空位的距离阈值

## 输出文件

模拟会生成以下文件：
- `init.dump`：初始原子位置
- `final.dump`：最终原子位置
- `nV.csv`：不同能量下的平均空位数
- 其他中间文件（取决于具体设置）

## 注意事项

1. 确保已正确设置 `ARCS_HOME` 环境变量
2. 确保系统已安装Julia并可通过命令行访问
3. 长时间运行的模拟可随时停止
4. 输出会实时显示在界面底部的黑色终端区域